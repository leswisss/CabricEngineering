"use client";

import React, { useRef, useState, useLayoutEffect } from "react";
import gsap from "gsap";
import { usePathname } from "next/navigation";
import "../styles/Preloader.scss";

const Preloader = () => {
  const slogan = "SUSTAINABLE & ECO-FRIENDLY CONSTRUCTION";
  const array2 = slogan.split(" ");
  const pathname = usePathname();
  const svgRef = useRef(null);
  const refs = useRef<HTMLSpanElement[]>([]);

  useLayoutEffect(() => {
    gsap.to(refs.current, {
      y: "0",
      stagger: 0.1,
      duration: 0.7,
    });
  }, []);

  return (
    <section className="preloader">
      <div className="preloader__text">
        <div className="home__active">
          <div className="preloader__overflow">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="150"
              height="147"
              viewBox="0 0 150 147"
              fill="none"
            >
              <g clip-path="url(#clip0_68_2)">
                <path
                  d="M144.615 58.5975C142.386 47.6472 137.681 37.3521 130.86 28.5C124.104 19.7201 115.437 12.5931 105.518 7.65893C95.5988 2.72476 84.6867 0.112844 73.6084 0.0210605C62.53 -0.0707229 51.5761 2.36003 41.5765 7.12918C31.5768 11.8983 22.7937 18.8808 15.8926 27.5475L15.1426 28.4625C5.29798 41.2272 -0.0283213 56.9001 0.00011326 73.02C0.00195234 77.1849 0.355711 81.3422 1.05761 85.4475L1.39511 87.405C3.37415 97.4199 7.46503 106.898 13.3951 115.208L14.1076 116.197C20.8872 125.447 29.7506 132.968 39.9795 138.153C50.2083 143.338 61.5148 146.04 72.9826 146.04C84.4504 146.04 95.7569 143.338 105.986 138.153C116.215 132.968 125.078 125.447 131.858 116.197L132.608 115.208C138.556 106.834 142.648 97.2855 144.608 87.2025C144.72 86.6175 144.825 86.04 144.93 85.455C146.462 76.559 146.34 67.4567 144.57 58.605L144.615 58.5975ZM16.7551 111.75C11.7339 104.511 8.18184 96.3568 6.30011 87.75C16.2751 88.785 26.3551 89.5875 36.3526 90.135C37.3957 99.1412 39.5081 107.991 42.6451 116.498C33.932 115.408 25.288 113.823 16.7551 111.75ZM21.3001 117.623C28.9726 119.28 36.8026 120.563 44.6851 121.455L44.7601 121.628C48.2626 129.278 52.5226 135.315 57.2401 139.47C43.2627 136.143 30.6879 128.499 21.3001 117.623ZM70.6651 141.15C63.0526 139.98 55.7926 133.193 50.1901 122.033C56.9401 122.655 63.8176 123 70.6651 123.067V141.15ZM70.6651 118.35C63.0451 118.275 55.4176 117.847 47.9326 117.067C44.5206 108.499 42.2365 99.5243 41.1376 90.3675C50.8501 90.8475 60.7501 91.1175 70.6651 91.1175V118.35ZM72.9751 84.9975V19.425L65.7151 24.75V84.9975H63.6001V33.75L58.5001 30.0675V84.9975H58.1101H57.1951C56.5201 84.9975 55.8526 84.9975 55.1701 84.9375H54.5401H53.4151C52.8601 84.9375 52.2976 84.9375 51.7501 84.87H51.4051C51.2701 84.87 51.1201 84.87 50.9851 84.87L49.6651 84.75L48.3376 84.705L47.4451 84.6525H47.0176V45.5325L42.2626 42.06V84.3825H42.1126H41.6251H41.4526C41.0851 84.3825 40.7026 84.3375 40.3351 84.315H39.8251L38.3251 84.2325C38.2201 84.2325 38.1076 84.2325 38.0101 84.2325L36.7576 84.1575C36.0076 84.1125 35.2576 84.075 34.5076 84.0225L32.4526 83.8875V46.7775L40.5451 40.845L42.1951 39.6375L43.7626 40.7775L46.9501 43.11V36.1425L56.8501 28.875L58.5001 27.6975H58.5451L60.1201 28.8525L63.5776 31.3875V23.8875L65.6926 22.3275L71.3326 18.2025L72.9526 17.01L74.6026 18.225L82.3951 23.9475V31.3875L85.8226 28.875L87.4351 27.6975L89.0476 28.875L99.0001 36.1425V43.1325L102.158 40.8225L103.755 39.66L105.413 40.8675L113.498 46.8V83.82L111.443 83.955L109.23 84.09L107.978 84.165C107.88 84.165 107.768 84.165 107.663 84.165L106.163 84.2475H105.653C105.278 84.2475 104.903 84.2475 104.528 84.315H104.348H103.868H103.733V42.06L99.0001 45.5325V84.6075H98.5501L97.6801 84.66C97.2301 84.66 96.7876 84.66 96.3376 84.705L94.9951 84.7575H94.6801H94.2451L92.5576 84.825H91.4401H90.8176L88.7926 84.8925H87.8776C87.7502 84.9 87.6225 84.9 87.4951 84.8925V30.0675L82.4401 33.75V84.9675L72.9751 84.9975ZM104.895 90.3675C103.807 99.5216 101.538 108.496 98.1451 117.067C90.6451 117.817 83.0251 118.275 75.3976 118.35V91.14C85.2751 91.11 95.1901 90.8475 104.895 90.3675ZM75.3751 141.15V123.067C82.2151 123 89.0851 122.655 95.8501 122.033C90.2401 133.193 82.9876 139.98 75.3751 141.15ZM88.7701 139.5C93.4951 135.345 97.7701 129.308 101.258 121.658L101.333 121.485C109.192 120.601 117.002 119.322 124.733 117.652C115.341 128.536 102.757 136.181 88.7701 139.5ZM129.39 111.63L129.285 111.78C120.751 113.843 112.107 115.421 103.395 116.505C106.529 107.998 108.641 99.1481 109.688 90.1425C119.685 89.595 129.765 88.7925 139.725 87.765C137.872 96.3093 134.36 104.407 129.39 111.6V111.63Z"
                  fill="#035336"
                />
                <path
                  d="M144.653 87.2025L144.953 85.455C144.87 86.04 144.75 86.6175 144.653 87.2025Z"
                  fill="#035336"
                />
                <path
                  d="M139.943 9.98999H137.063V18.18H135.788V9.98999H132.885V8.81999H139.943V9.98999Z"
                  fill="#035336"
                />
                <path
                  d="M150 8.82749V18.18H148.763V15.18C148.763 13.9875 148.763 12.78 148.86 11.5575L146.115 17.94H144.93L142.23 11.61C142.313 12.69 142.358 13.86 142.365 15.18V18.18H141.12V8.81999H142.32L145.545 16.5L148.8 8.83499L150 8.82749Z"
                  fill="#035336"
                />
              </g>
              <defs>
                <clipPath id="clip0_68_2">
                  <rect width="150" height="146.04" fill="white" />
                </clipPath>
              </defs>
            </svg>
          </div>
          <div className="preloader__overflow">
            <p>
              {array2.map((word, i) => (
                <span
                  key={`w${i}`}
                  className="array-2"
                  ref={(el) => el && refs.current.push(el)}
                >
                  {word}
                </span>
              ))}
            </p>
          </div>
        </div>
      </div>
      <div className="preloader__overlay">
        <div className="bar"></div>
        <div className="bar"></div>
        <div className="bar"></div>
        <div className="bar"></div>
        <div className="bar"></div>
        <div className="bar"></div>
        <div className="bar"></div>
        <div className="bar"></div>
        <div className="bar"></div>
        <div className="bar"></div>
      </div>
    </section>
  );
};

export default Preloader;
